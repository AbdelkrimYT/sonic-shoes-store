<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Rubik:ital,wght@0,300..900;1,300..900&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/flowbite@2.5.2/dist/flowbite.min.css" rel="stylesheet" />
    <title>Sonic Shoes - prodecy name</title>
    <style>
        header {
            text-align: center;
        }

        .banner {
            padding: 12px;
            background-color: black;
            color: white;
            font-size: 16px;
        }

        .logo {
            padding: 24px;
            border-bottom-style: solid;
            border-bottom-width: 1px;
        }

        .logo > strong {
            color: #E42217;
            font-size: 24px;
            font-style: italic;
        }

        .logo > img {
            display: inline;
            width: 32px;
            height: 32px;
        }

        section {
            margin: 12px;
        }
    </style>
</head>
<body>
    <header>
        <div class="banner">
            <strong>
                اطلب الآن واستمتع بخدمة الدفع عند الاستلام لضمان راحتك واطمئنانك
            </strong>
        </div>
        <div class="logo">
            <strong>
                Sonic Shoes
            </strong>
            <img src="./assets/logo.png" />
        </div>
    </header>

  <main>
    <section class="max-w-sm mx-auto">

        <div id="default-carousel" class="relative w-full" data-carousel="slide">
            <div class="relative h-96 overflow-hidden rounded-sm">
                <div class="hidden duration-700 ease-in-out" data-carousel-item>
                    <img src="https://scontent.fqfd1-2.fna.fbcdn.net/v/t39.30808-6/473033380_122104625816718735_8489891894849941705_n.jpg?stp=cp6_dst-jpg_tt6&_nc_cat=106&ccb=1-7&_nc_sid=833d8c&_nc_eui2=AeGF2jGqtuOKVpo_nXmSU9MKMlD7_JjOyYUyUPv8mM7JhevI0gs3DuWZGCgZSBMM1GIkCY1xp2tHVlo25HOTctk6&_nc_ohc=DkUXKfhKzvMQ7kNvgFmaJlh&_nc_zt=23&_nc_ht=scontent.fqfd1-2.fna&_nc_gid=AoGYa0Mze3XRrdB6EMIj9Jv&oh=00_AYBcdQlU4bz3IThgvb-_op4wEQ6CX0S6I8-Dlcwc9JWvmw&oe=6789F808" class="absolute block w-full -translate-x-1/2 -translate-y-1/2 top-1/2 left-1/2" alt="...">
                </div>
                <div class="hidden duration-700 ease-in-out" data-carousel-item>
                    <img src="https://scontent.fqfd1-2.fna.fbcdn.net/v/t39.30808-6/473064244_122104625846718735_5439942712348042769_n.jpg?stp=cp6_dst-jpg_tt6&_nc_cat=110&ccb=1-7&_nc_sid=833d8c&_nc_eui2=AeGWK2S3vwyjtYIETuFsMfR2K6aVHhSzVwYrppUeFLNXBrl2lSKNIOtodMQvkJqqxQRpdZH68oLAWqESlueuMcMf&_nc_ohc=gnc8ZlwdcdEQ7kNvgEK-nC1&_nc_zt=23&_nc_ht=scontent.fqfd1-2.fna&_nc_gid=AsEk1EHAgfXea7KDsZSO_-P&oh=00_AYAYu6pX6mAZ2shMaUYNYN9kHSZttMIg2gwY4LGH89Hz8A&oe=678A0182" class="absolute block w-full -translate-x-1/2 -translate-y-1/2 top-1/2 left-1/2" alt="...">
                </div>
                <div class="hidden duration-700 ease-in-out" data-carousel-item>
                    <img src="https://scontent.fqfd1-2.fna.fbcdn.net/v/t39.30808-6/473191263_122104625972718735_5882760343417351477_n.jpg?stp=cp6_dst-jpg_tt6&_nc_cat=111&ccb=1-7&_nc_sid=833d8c&_nc_eui2=AeHS0B7NSh_njD2Ymg-p4PNbXEFSKBi3q9JcQVIoGLer0iOuVlDAj8fsi2O0MtlJ7J08egya8hn15o7WDTI_w2mZ&_nc_ohc=K3C_CHgsua4Q7kNvgGdmQC5&_nc_zt=23&_nc_ht=scontent.fqfd1-2.fna&_nc_gid=A9z9zbbk0shkMcQjtyg7a2G&oh=00_AYD3zrNBLH4V_3GKdfseSUATgTIGjV2sMZkJ0eeQR7WkkQ&oe=678A26E3" class="absolute block w-full -translate-x-1/2 -translate-y-1/2 top-1/2 left-1/2" alt="...">
                </div>
                <div class="hidden duration-700 ease-in-out" data-carousel-item>
                    <img src="https://scontent.fqfd1-1.fna.fbcdn.net/v/t39.30808-6/473191695_122104626014718735_5466960730541911675_n.jpg?stp=cp6_dst-jpg_tt6&_nc_cat=102&ccb=1-7&_nc_sid=833d8c&_nc_eui2=AeHr6j3joW8VAA-WaSIHtAUXPwNWUHDdTS8_A1ZQcN1NLwaUZdSnA6wk64j1n-SozBazNbnLPy0kn-TUP-Z512k5&_nc_ohc=ZmJ68QkJmNkQ7kNvgGXdUh7&_nc_zt=23&_nc_ht=scontent.fqfd1-1.fna&_nc_gid=AYc7d4NmNfXWI2Qp0yg85ZP&oh=00_AYAsvsQIcuJhMFAgHCysN7KiTiknuHk1K4sJj2lot96XWQ&oe=678A0863" class="absolute block w-full -translate-x-1/2 -translate-y-1/2 top-1/2 left-1/2" alt="...">
                </div>
                <div class="hidden duration-700 ease-in-out" data-carousel-item>
                    <img src="https://scontent.fqfd1-1.fna.fbcdn.net/v/t39.30808-6/473037717_122104626080718735_4276186102591227655_n.jpg?stp=cp6_dst-jpg_tt6&_nc_cat=105&ccb=1-7&_nc_sid=833d8c&_nc_eui2=AeH7FIygGs1hM-yagxPvDd_NjPDeRut1IoeM8N5G63Uih2jexe6TAsfBuTENc8upLa2VSUZX_PkzRlmRVHmp38xs&_nc_ohc=sdQPr7x4eAUQ7kNvgGw2sLZ&_nc_zt=23&_nc_ht=scontent.fqfd1-1.fna&_nc_gid=A2uFr8T4tOYA74FD5-QhCxX&oh=00_AYA1EzRf4QSqS-0-cwrWR0F-purqKVmY4nzlD0Kld_wptA&oe=678A236C" class="absolute block w-full -translate-x-1/2 -translate-y-1/2 top-1/2 left-1/2" alt="...">
                </div>
            </div>
            <div class="absolute z-30 flex -translate-x-1/2 bottom-5 left-1/2 space-x-3 rtl:space-x-reverse">
                <button type="button" class="w-3 h-3 rounded-full" aria-current="true" aria-label="Slide 1" data-carousel-slide-to="0"></button>
                <button type="button" class="w-3 h-3 rounded-full" aria-current="false" aria-label="Slide 2" data-carousel-slide-to="1"></button>
                <button type="button" class="w-3 h-3 rounded-full" aria-current="false" aria-label="Slide 3" data-carousel-slide-to="2"></button>
                <button type="button" class="w-3 h-3 rounded-full" aria-current="false" aria-label="Slide 4" data-carousel-slide-to="3"></button>
                <button type="button" class="w-3 h-3 rounded-full" aria-current="false" aria-label="Slide 5" data-carousel-slide-to="4"></button>
            </div>
            <button type="button" class="absolute top-0 start-0 z-30 flex items-center justify-center h-full px-4 cursor-pointer group focus:outline-none" data-carousel-prev>
                <span class="inline-flex items-center justify-center w-10 h-10 rounded-full bg-white/30 group-hover:bg-white/50 group-focus:ring-4 group-focus:ring-white group-focus:outline-none">
                    <svg class="w-4 h-4 text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 6 10">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 1 1 5l4 4"/>
                    </svg>
                    <span class="sr-only">السابق</span>
                </span>
            </button>
            <button type="button" class="absolute top-0 end-0 z-30 flex items-center justify-center h-full px-4 cursor-pointer group focus:outline-none" data-carousel-next>
                <span class="inline-flex items-center justify-center w-10 h-10 rounded-full bg-white/30 group-hover:bg-white/50 group-focus:ring-4 group-focus:ring-white group-focus:outline-none">
                    <svg class="w-4 h-4 text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 6 10">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 9 4-4-4-4"/>
                    </svg>
                    <span class="sr-only">التالي</span>
                </span>
            </button>
        </div>

        <div class="mt-4">
            <strong class="text-4xl text-gray-900">اسم المنتج</strong>
            <p class="text-2xl text-gray-900">فقط بـ <span id="price">0</span>دج</p>
        </div>

        <form class="mt-4">
            <div class="rounded-sm border p-4">
                <div class="mb-5">
                    <label for="color" class="block mb-2 text-sm font-medium text-gray-900">اللون</label>
                    <select id="color" name="color" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-sm focus:ring-red-500 focus:border-red-500 block w-full p-2.5">
                        <option value="أسود">أسود</option>
                    </select>
                </div>
                <div class="mb-5">
                    <label for="size" class="block mb-2 text-sm font-medium text-gray-900">المقاس</label>
                    <select id="size" name="size" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-sm focus:ring-red-500 focus:border-red-500 block w-full p-2.5">
                        <option value="40">40</option>
                        <option value="41">41</option>
                    </select>
                </div>
                <div class=mb-5"">
                    <label for="quantity" class="block mb-2 text-sm font-medium text-gray-900">الكمية</label>
                    <input id="quantity" name="quantity" type=number min="1" value="1" onchange="changeQuantity()" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-sm focus:ring-red-500 focus:border-red-500 block w-full p-2.5">
                </div>
            </div>

            <div class="rounded-sm border mt-4 p-4">
                <div class="mb-5">
                    <label for="fullname" class="block mb-2 text-sm font-medium text-gray-900">الاسم الشخصي</label>
                    <input type="text" id="fullname" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-sm focus:ring-red-500 focus:border-red-500 block w-full p-2.5">
                </div>
                <div class="mb-5">
                    <label for="phone" class="block mb-2 text-sm font-medium text-gray-900">رقم الهاتف</label>
                    <input type="text" id="fullname" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-sm focus:ring-red-500 focus:border-red-500 block w-full p-2.5" maxlength="10">
                </div>
                <div class="mb-5">
                    <label for="state" class="block mb-2 text-sm font-medium text-gray-900">الولاية</label>
                    <select id="state" onchange="changeCommune()" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-sm focus:ring-red-500 focus:border-red-500 block w-full p-2.5">
                        <option></option>
                    </select>
                </div>
                <div class="mb-5">
                    <label for="commune" class="block mb-2 text-sm font-medium text-gray-900">البلدية</label>
                    <select id="commune" name="commune" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-sm focus:ring-red-500 focus:border-red-500 block w-full p-2.5">
                    </select>
                </div>
            </div>

            <div class="mt-4">
                <div class="mb-4 flex items-center ps-4 border border-gray-200 rounded">
                    <input id="bordered-radio-1" type="radio" value="tooffice" name="delivery-to" checked onclick="setDeliveryToOffice()" class="w-4 h-4 text-red-500 bg-gray-100 border-gray-300 focus:ring-red-400">
                    <label for="bordered-radio-1" class="w-full py-4 ms-2 text-sm font-medium text-gray-900">توصيل للمكتب</label>
                </div>
                <div class="flex items-center ps-4 border border-gray-200 rounded">
                    <input id="" type="radio" value="tohome" name="delivery-to" class="w-4 h-4 text-red-500 bg-gray-100 border-gray-300 focus:ring-red-400">
                    <label for="bordered-radio-2" class="w-full py-4 ms-2 text-sm font-medium text-gray-900">توصيل للمنزل</label>
                </div>
            </div>

            <div class="mt-4 bg-red-50 border rounded-sm border-red-300">
                <div class="p-4">
                    <strong>
                        ملخص الطلب
                    </strong>
                </div>
                <div class="p-4">
                    <ul class="max-w-md">
                        <li class="pb-3 sm:pb-4">
                           <div class="flex items-center space-x-4 rtl:space-x-reverse">
                              <div class="flex-1 min-w-0">
                                 <p class="text-sm font-medium text-gray-900 truncate">
                                    اسم المنتج
                                 </p>
                                 <p class="text-sm text-gray-500 truncate">
                                    <span id="qty">0</span>x
                                 </p>
                              </div>
                              <div class="inline-flex items-center text-base font-semibold text-gray-900">
                                    <span id="unit-price">0</span><span>دج</span>
                              </div>
                           </div>
                        </li>
                        <li class="pb-3 sm:pb-4">
                            <div class="flex items-center space-x-4 rtl:space-x-reverse">
                               <div class="flex-1 min-w-0">
                                  <p class="text-sm font-medium text-gray-900 truncate">
                                    تكلفة التوصيل
                                  </p>
                               </div>
                               <div class="inline-flex items-center text-base font-semibold text-gray-900">
                                  <span id="delivery-cost">0</span><span>دج</span>
                               </div>
                            </div>
                         </li>
                         <hr>
                         <li class="mt-4 pb-3 sm:pb-4">
                            <div class="flex items-center space-x-4 rtl:space-x-reverse">
                               <div class="flex-1 min-w-0">
                                  <p class="text-sm font-medium text-gray-900 truncate">السعر الاجمالي</p>
                               </div>
                               <div class="inline-flex items-center text-base font-semibold text-gray-900">
                                  <span id="total">0</span><span>دج</span>
                               </div>
                            </div>
                         </li>
                     </ul>
                </div>
            </div>

            <button type="button" onclick="makeOrder()" data-modal-target="popup-modal" data-modal-toggle="popup-modal" class="mt-4 w-full focus:outline-none text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:ring-red-300 font-medium rounded-sm text-sm px-5 py-2.5 me-2 mb-2">
                تأكيد الطلب
            </button>

          </form>
    </section>
  </main>

    <div id="popup-modal" tabindex="-1" class="hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full">
        <div class="relative p-4 w-full max-w-md max-h-full">
            <div class="relative bg-white rounded-lg shadow">
                <div class="p-4 md:p-5 text-center">
                    <svg class="mx-auto mb-4 text-gray-400 w-12 h-12" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 30 20">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.5 11.5 11 14l4-4m6 2a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"/>
                    </svg>                      
                    <h3 class="mb-5 text-lg font-normal text-gray-500">تم استقبال طلبكم بنجاح، سيتم التواصل معكم بعد قليل، شكرا لثقتكم</h3>
                    <button data-modal-hide="popup-modal" type="button" class="text-white bg-green-400 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm inline-flex items-center px-5 py-2.5 text-center">
                        اغلاق
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/flowbite@2.5.2/dist/flowbite.min.js"></script>

    <script>
    const products = [];

    axios.get('https://raw.githubusercontent.com/AbdelkrimYT/sonic-shoes-store/main/data/product.json')
        .then(response => {
            response.data.forEach(e => {
                products.push(e);
            });
        }).catch((error) => {
            console.log(error);
        });


    const product_query = new URLSearchParams(window.location.search);
    const slug = product_query.get('slug');
    const product = products.find(p => p.slug == slug);

    if (!product) {
        alert('لم يتم العثور على المنتج');
    }

    
    const states = [];
    const delivery_costs = [];

    let quantity = 1;
    const unit_price = 2300;
    let delivery_cost = {
        "to_office": 200,
        "to_home": 700,
    };

    let delivery = delivery_cost['to_office'];

    let total = delivery + (unit_price * quantity);

    axios.get('https://raw.githubusercontent.com/AbdelkrimYT/sonic-shoes-store/main/data/states.json')
        .then(response => {
            const state_select = document.getElementById('state');
            
            response.data.forEach(e => {
                let option = document.createElement('option');
                option.value = e.code;
                option.innerHTML = e.name;
                state_select.appendChild(option);
                states.push(e);
            });

            return response.data;
        }).catch((error) => {
            console.log(error);
        });

    axios.get('https://raw.githubusercontent.com/AbdelkrimYT/sonic-shoes-store/main/data/product.json')
        .then(response => {
            response.data.forEach(e => {
                products.push(e);
            });
        }).catch((error) => {
            console.log(error);
        });

    document.getElementById('price').innerText = unit_price;
    document.getElementById('unit-price').innerText = unit_price;
    document.getElementById('qty').innerText = quantity;
    document.getElementById('delivery-cost').innerText = delivery_cost['to_office'];
    document.getElementById('total').innerText = total;

    function changeCommune() {
        const change_code = document.getElementById('state').value;
        const commune_element = document.getElementById('commune');

        while (commune_element.length > 0)
            commune_element.remove(0);

        if (!change_code)
            return;

        const state = states.find(e => e.code == change_code);
        
        state.communes.forEach(e => {
            const option = document.createElement('option');
            option.value = e.code;
            option.innerHTML = e.name;
            commune_element.appendChild(option);
        });
    }

    function changeQuantity() {
        quantity = document.getElementById('quantity').value;
        document.getElementById('qty').innerText = quantity;
        let total = delivery + (unit_price * quantity);
        document.getElementById('total').innerText = total;
    }

    function setDeliveryToOffice() {
        delivery = delivery_cost['']
    }

    function makeOrder() {

    }

    </script>

</body>
</html>